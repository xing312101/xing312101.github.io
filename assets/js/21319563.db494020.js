"use strict";(self.webpackChunkxing_life_3=self.webpackChunkxing_life_3||[]).push([[5947],{6375:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>a});var t=r(4848),s=r(8453);const i={},l="Flutter",d={id:"technique/flutter/README",title:"Flutter",description:"https://dart.dev/get-dart",source:"@site/docs/technique/flutter/README.md",sourceDirName:"technique/flutter",slug:"/technique/flutter/",permalink:"/docs/technique/flutter/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"techniqueSidebar",previous:{title:"Firebase",permalink:"/docs/technique/firebase/"},next:{title:"barcode scanner",permalink:"/docs/technique/flutter/barcode_scanner"}},o={},a=[{value:"Notice",id:"notice",level:2},{value:"Version Control",id:"version-control",level:2},{value:"Flutter&#39;s build modes",id:"flutters-build-modes",level:2},{value:"flutter commands",id:"flutter-commands",level:2},{value:"check dependencies",id:"check-dependencies",level:4},{value:"build web version",id:"build-web-version",level:4},{value:"Update package",id:"update-package",level:4},{value:"Adding a launcher icon",id:"adding-a-launcher-icon",level:2},{value:"pubspec.yaml",id:"pubspecyaml",level:3},{value:"run",id:"run",level:3},{value:"Android release build",id:"android-release-build",level:2},{value:"Create an upload keystore",id:"create-an-upload-keystore",level:3},{value:"[project]/android/key.properties",id:"projectandroidkeyproperties",level:3},{value:"Proguard Rule",id:"proguard-rule",level:3},{value:"Configure signing in gradle",id:"configure-signing-in-gradle",level:3},{value:"Add the keystore information",id:"add-the-keystore-information",level:4},{value:"buildTypes",id:"buildtypes",level:4},{value:"Do not use BuildContexts across async gaps.",id:"do-not-use-buildcontexts-across-async-gaps",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"flutter",children:"Flutter"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://dart.dev/get-dart",children:"https://dart.dev/get-dart"})}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://flutter.dev",children:"https://flutter.dev"})}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://book.flutterchina.club",children:"https://book.flutterchina.club"})}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://www.mdeditor.tw/pl/pUFP/zh-tw",children:"https://www.mdeditor.tw/pl/pUFP/zh-tw"})," # about build version"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notice",children:"Notice"}),"\n",(0,t.jsx)(n.p,{children:"install dart first"}),"\n",(0,t.jsx)(n.h2,{id:"version-control",children:"Version Control"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/leoafarias/fvm",children:"https://github.com/leoafarias/fvm"})}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://fvm.app/",children:"https://fvm.app/"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ pub global activate fvm\n$ fvm install v1.7.8+hotfix.4\n\nper project\n$ fvm use <version>\n\nglobal\n$ fvm use <version> --global\n\n"})}),"\n",(0,t.jsx)(n.h2,{id:"flutters-build-modes",children:"Flutter's build modes"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://flutter.dev/docs/testing/build-modes",children:"https://flutter.dev/docs/testing/build-modes"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"flutter-commands",children:"flutter commands"}),"\n",(0,t.jsx)(n.h4,{id:"check-dependencies",children:"check dependencies"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ flutter doctor\n"})}),"\n",(0,t.jsx)(n.h4,{id:"build-web-version",children:"build web version"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://flutter.dev/docs/get-started/web",children:"https://flutter.dev/docs/get-started/web"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u76ee\u524dbeta\u6240\u4ee5\u5b98\u65b9\u5efa\u8b70\u662f\u7528\u65b0\u7684version"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ flutter channel beta // \u5207\u63dbbeta\n$ flutter upgrade // \u53d6\u5f97\u65b0\u7684version\n$ flutter config --enable-web\n"})}),"\n",(0,t.jsx)(n.h4,{id:"update-package",children:"Update package"}),"\n",(0,t.jsx)(n.p,{children:"\u985e\u4f3c bundle install"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ flutter pub get\n"})}),"\n",(0,t.jsx)(n.h2,{id:"adding-a-launcher-icon",children:"Adding a launcher icon"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://pub.dev/packages/flutter_launcher_icons",children:"https://pub.dev/packages/flutter_launcher_icons"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"pubspecyaml",children:"pubspec.yaml"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'dev_dependencies:\n  flutter_launcher_icons: "^0.9.2"\n\nflutter_icons:\n  android: "launcher_icon"\n  ios: true\n  image_path: "assets/icon/icon.png"\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"run",children:"run"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"flutter pub run flutter_launcher_icons:main\n"})}),"\n",(0,t.jsx)(n.h2,{id:"android-release-build",children:"Android release build"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://docs.flutter.dev/deployment/android",children:"https://docs.flutter.dev/deployment/android"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"create-an-upload-keystore",children:"Create an upload keystore"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"On Mac/Linux, use the following command:\n  keytool -genkey -v -keystore ~/upload-keystore.jks -keyalg RSA -keysize 2048 -validity 10000 -alias upload\n\nOn Windows, use the following command:\n  keytool -genkey -v -keystore c:\\Users\\USER_NAME\\upload-keystore.jks -storetype JKS -keyalg RSA -keysize 2048 -validity 10000 -alias upload\n"})}),"\n",(0,t.jsx)(n.h3,{id:"projectandroidkeyproperties",children:"[project]/android/key.properties"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"storePassword=<password from previous step>\nkeyPassword=<password from previous step>\nkeyAlias=upload\nstoreFile=<location of the key store file, such as /Users/<user name>/upload-keystore.jks>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"proguard-rule",children:"Proguard Rule"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"android/app/proguard-rules.pro"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"## Flutter wrapper\n-keep class io.flutter.app.** { *; }\n-keep class io.flutter.plugin.**  { *; }\n-keep class io.flutter.util.**  { *; }\n-keep class io.flutter.view.**  { *; }\n-keep class io.flutter.**  { *; }\n-keep class io.flutter.plugins.**  { *; }\n-dontwarn io.flutter.embedding.**\n"})}),"\n",(0,t.jsx)(n.h3,{id:"configure-signing-in-gradle",children:"Configure signing in gradle"}),"\n",(0,t.jsx)(n.p,{children:"at [project]/android/app/build.gradle"}),"\n",(0,t.jsx)(n.h4,{id:"add-the-keystore-information",children:"Add the keystore information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"   def keystoreProperties = new Properties()\n   def keystorePropertiesFile = rootProject.file('key.properties')\n   if (keystorePropertiesFile.exists()) {\n       keystoreProperties.load(new FileInputStream(keystorePropertiesFile))\n   }\n\n   android {\n         ...\n   }\n\n"})}),"\n",(0,t.jsx)(n.h4,{id:"buildtypes",children:"buildTypes"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"signingConfigs {\n    release {\n        keyAlias keystoreProperties['keyAlias']\n        keyPassword keystoreProperties['keyPassword']\n        storeFile keystoreProperties['storeFile'] ? file(keystoreProperties['storeFile']) : null\n        storePassword keystoreProperties['storePassword']\n    }\n}\n\nbuildTypes {\n    debug {\n        signingConfig signingConfigs.debug\n        minifyEnabled false\n        // useProguard true // replaced by android.enableR8=true at gradle.properties\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n\n    release {\n        signingConfig signingConfigs.release\n        // useProguard true // replaced by android.enableR8=true at gradle.properties\n        shrinkResources true\n        minifyEnabled true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"do-not-use-buildcontexts-across-async-gaps",children:"Do not use BuildContexts across async gaps."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"if (!mounted) return;\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>d});var t=r(6540);const s={},i=t.createContext(s);function l(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);