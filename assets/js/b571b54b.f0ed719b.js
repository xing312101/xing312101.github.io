"use strict";(self.webpackChunkxing_life_3=self.webpackChunkxing_life_3||[]).push([[9521],{5181:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var o=n(4848),i=n(8453);const a={},r="FirstVideoObjectDetection",c={id:"technique/imageai/firstvideoobjectdetection",title:"FirstVideoObjectDetection",description:"ref//github.com/OlafenwaMoses/ImageAI/blob/master/imageai/Detection/VIDEO.md",source:"@site/docs/technique/imageai/firstvideoobjectdetection.md",sourceDirName:"technique/imageai",slug:"/technique/imageai/firstvideoobjectdetection",permalink:"/docs/technique/imageai/firstvideoobjectdetection",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"techniqueSidebar",previous:{title:"FirstPrediction",permalink:"/docs/technique/imageai/firstprediction"},next:{title:"tutorial",permalink:"/docs/technique/imageai/tutorial"}},s={},d=[{value:"Custom Video Object Detection",id:"custom-video-object-detection",level:4},{value:"customize function",id:"customize-function",level:4},{value:"Camera / Live Stream Video Detection",id:"camera--live-stream-video-detection",level:2}];function u(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"firstvideoobjectdetection",children:"FirstVideoObjectDetection"})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["ref: ",(0,o.jsx)(t.a,{href:"https://github.com/OlafenwaMoses/ImageAI/blob/master/imageai/Detection/VIDEO.md",children:"https://github.com/OlafenwaMoses/ImageAI/blob/master/imageai/Detection/VIDEO.md"})]}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'from imageai.Detection import VideoObjectDetection\nimport os\n\nai_models_path = "/Users/xing312101/study/aiModels"\nimage_ai_path = "/Users/xing312101/study/ImageAI"\ndata_images_path = image_ai_path + "/data-images"\ndata_videos_path = image_ai_path + "/data-videos"\noutput_path = "/Users/xing312101/study/xImageAi/output"\n\ndetector = VideoObjectDetection()\ndetector.setModelTypeAsRetinaNet()\ndetector.setModelPath(os.path.join(ai_models_path, "resnet50_coco_best_v2.1.0.h5"))\ndetector.loadModel()\n\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'video_path = detector.detectObjectsFromVideo(\n  input_file_path=os.path.join(data_videos_path, "traffic-mini.mp4"),\n  output_file_path=os.path.join(output_path, "traffic_detected"),\n  frames_per_second=20,\n  log_progress=True\n)\n'})}),"\n",(0,o.jsx)(t.h4,{id:"custom-video-object-detection",children:"Custom Video Object Detection"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'custom_objects = detector.CustomObjects(\n    person=True, bicycle=True, motorcycle=True)\n\nvideo_path = detector.detectCustomObjectsFromVideo(\n    custom_objects=custom_objects,\n    input_file_path=os.path.join(data_videos_path, "traffic-mini.mp4"),\n    output_file_path=os.path.join(output_path, "traffic_custom_detected"),\n    frames_per_second=26, log_progress=True)\n\n'})}),"\n",(0,o.jsx)(t.h4,{id:"customize-function",children:"customize function"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'def forFrame(frame_number, output_array, output_count)\n\ndef forSeconds(second_number, output_arrays, count_arrays, average_output_count)\n\ndef forMinute(minute_number, output_arrays, count_arrays, average_output_count)\n\nvideo_path = detector.detectCustomObjectsFromVideo(\n    custom_objects=custom_objects,\n    input_file_path=os.path.join(data_videos_path, "traffic-mini.mp4"),\n    output_file_path=os.path.join(output_path, "traffic_custom_detected"),\n    frames_per_second=26,\n    log_progress=True,\n\n    per_second_function=forSeconds,\n    per_frame_function=forFrame,\n    per_minute_function=forMinute,\n)\n\n'})}),"\n",(0,o.jsx)(t.h2,{id:"camera--live-stream-video-detection",children:"Camera / Live Stream Video Detection"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'import cv2\nfrom imageai.Detection import VideoObjectDetection\nimport os\nimport numpy as np\n\n\ndef forFrame(frame_number, output_array, output_count, returned_frame):\n    # 2764800\n    newFrameNp = returned_frame.reshape(720, 1280, 3)\n\n    cv2.imshow("return_frame", newFrameNp)\n    cv2.waitKey(100)\n    print("------------END OF A FRAME --------------")\n\nai_models_path = "/Users/xing312101/study/aiModels"\nimage_ai_path = "/Users/xing312101/study/ImageAI"\ndata_images_path = image_ai_path + "/data-images"\ndata_videos_path = image_ai_path + "/data-videos"\noutput_path = "/Users/xing312101/study/xImageAi/output"\n\nprint("@@ init camera")\ncamera = cv2.VideoCapture(0)\n\ndetector = VideoObjectDetection()\ndetector.setModelTypeAsRetinaNet()\ndetector.setModelPath(os.path.join(\n    ai_models_path, "resnet50_coco_best_v2.1.0.h5"))\ndetector.loadModel()\n\nwhile not camera.isOpened():\n    print("camera is not open")\n\nprint("@@ start detect")\nvideo_path = detector.detectObjectsFromVideo(\n    camera_input=camera,\n    output_file_path=os.path.join(output_path, "camera_detected_video"),\n    frames_per_second=20,\n    log_progress=True,\n    minimum_percentage_probability=40,\n    # detection_timeout=10,\n    per_frame_function=forFrame,\n    # per_second_function=forSeconds,\n    return_detected_frame=True\n)\n\n\n'})})]})}function m(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>c});var o=n(6540);const i={},a=o.createContext(i);function r(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);