"use strict";(self.webpackChunkxing_life_3=self.webpackChunkxing_life_3||[]).push([[4647],{3108:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>a,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var c=t(4848),s=t(8453);const i={},r="RSpec",o={id:"technique/pg_languages/ruby_on_rails/rspec",title:"RSpec",description:"references//rspec.info/",source:"@site/docs/technique/pg_languages/ruby_on_rails/rspec.md",sourceDirName:"technique/pg_languages/ruby_on_rails",slug:"/technique/pg_languages/ruby_on_rails/rspec",permalink:"/docs/technique/pg_languages/ruby_on_rails/rspec",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"techniqueSidebar",previous:{title:"rmagick",permalink:"/docs/technique/pg_languages/ruby_on_rails/rmagick"},next:{title:"RVM",permalink:"/docs/technique/pg_languages/ruby_on_rails/rvm"}},d={},l=[{value:"install",id:"install",level:2},{value:"sample",id:"sample",level:2},{value:"Syntax Highlighting",id:"syntax-highlighting",level:2},{value:"rspec --only-failures",id:"rspec---only-failures",level:2},{value:"rspec do focus on fcontext",id:"rspec-do-focus-on-fcontext",level:2},{value:"Practice coffee_spec.rb",id:"practice-coffee_specrb",level:2},{value:"Practice sandwich_spec.rb",id:"practice-sandwich_specrb",level:2},{value:"Practice slow_spec.rb",id:"practice-slow_specrb",level:2}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"rspec",children:"RSpec"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["references: ",(0,c.jsx)(n.a,{href:"http://rspec.info/",children:"http://rspec.info/"})]}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://relishapp.com/rspec",children:"https://relishapp.com/rspec"})}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://github.com/rspec/rspec",children:"https://github.com/rspec/rspec"})}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"http://rspec.info/documentation/3.7/rspec-rails/",children:"http://rspec.info/documentation/3.7/rspec-rails/"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"install",children:"install"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"1.\ngem install rspec\nor Gemfile\ngem 'rspec'\n\n2.\nrspec --init\n\n# can use rspec --help\n\n3. run spec\nvim project/spec/sandwich_spec.rb # write spec\nrspec sandwich_spec.rb # do test\n--------------\nrspec --format documentation # rspec -fd\nrspec --profile 2 # \u770b\u6700\u6162\u7684\u5169\u500b\u6e2c\u8a66\nrspec -e milk -fd # running by name, \u9032\u884cmilk\u6e2c\u8a66\nrspec --only-failures\nrspec --tag last_run_status:failed\n"})}),"\n",(0,c.jsx)(n.h2,{id:"sample",children:"sample"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"# sample\nSandwich = Struct.new(:taste, :toppings)\ndef sandwich\n\t@sandwich ||= Sandwich.new('delicious', [])\nend\n\nRSpec.describe 'An ideal sandwich' do\n\tbefore {\n\t\tsandwich()\n\t}\n\n\tit 'is delicious' do\n\t\ttaste = @sandwich.taste\n\t\texpect(taste).to eq('delicious')\n\tend\n\tit 'lets me add toppings' do\n\t\t@sandwich.toppings << 'cheese'\n\t\ttoppings = @sandwich.toppings\n\t\texpect(toppings).not_to be_empty\n\tend\nend\n\n## result\nfcontext 'with milk' do\nsame as\ncontext 'with milk', focus: true do\n"})}),"\n",(0,c.jsx)(n.h2,{id:"syntax-highlighting",children:"Syntax Highlighting"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"gem install coderay\ngem install coderay -v 1.1.1\nrspec -fd\n"})}),"\n",(0,c.jsx)(n.h2,{id:"rspec---only-failures",children:"rspec --only-failures"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"RSpec.configure do |config|\n\tconfig.example_status_persistence_file_path = 'spec/examples.txt'\nend\n"})}),"\n",(0,c.jsx)(n.h2,{id:"rspec-do-focus-on-fcontext",children:"rspec do focus on fcontext"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'# replace "context" to "fcontext" in spec file.\n\nRSpec.configure do |config|\n\tconfig.filter_run_when_matching(focus: true)\n\tconfig.example_status_persistence_file_path = \'spec/examples.txt\'\nend\n'})}),"\n",(0,c.jsx)(n.h2,{id:"practice-coffee_specrb",children:"Practice coffee_spec.rb"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"RSpec.configure do |config|\n\tconfig.filter_run_when_matching(focus: true)\n\tconfig.example_status_persistence_file_path = 'spec/examples.txt'\nend\n\nclass Coffee\n\tdef ingredients\n\t\t@ingredients ||= []\n\tend\n\n\tdef add(ingredient)\n\t\tingredients << ingredient\n\tend\n\n\tdef price\n\t\t1.00\n\tend\n\n\tdef color\n\t\tingredients.include?(:milk) ? :light : :dark\n\tend\n\n\tdef temperature\n\t\tingredients.include?(:milk) ? 190.0 : 205.0\n\tend\nend\n\nRSpec.describe 'A cup of coffee' do\n\tlet(:coffee) {Coffee.new}\n\n\tit 'costs $1' do\n\t\texpect(coffee.price).to eq(1.00)\n\tend\n\n\tcontext 'with milk' do\n\t\tbefore { coffee.add :milk }\n\n\t\tit 'is light in color' do\n\t\t\tpending 'Color not implemented yet'\n\t\t\texpect(coffee.color).to be(:light)\n\t\tend\n\n\t\tit 'is cooler than 200 degrees Fahrenheit' do\n\t\t\tpending 'Temperature not implemented yet'\n\t\t\texpect(coffee.temperature).to be < 200.0\n\t\tend\n\n\n\t\tit 'costs $1.25' do\n\t\t\texpect(coffee.price).to eq(1.25)\n\t\tend\n\tend\nend\n"})}),"\n",(0,c.jsx)(n.h2,{id:"practice-sandwich_specrb",children:"Practice sandwich_spec.rb"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Sandwich = Struct.new(:taste, :toppings)\ndef sandwich\n\t@sandwich ||= Sandwich.new('delicious', [])\nend\n\nRSpec.describe 'An ideal sandwich' do\n\tbefore {\n\t\tsandwich()\n\t}\n\n\tit 'is delicious' do\n\t\ttaste = @sandwich.taste\n\t\texpect(taste).to eq('delicious')\n\tend\n\tit 'lets me add toppings' do\n\t\t@sandwich.toppings << 'cheese'\n\t\ttoppings = @sandwich.toppings\n\t\texpect(toppings).not_to be_empty\n\tend\nend\n"})}),"\n",(0,c.jsx)(n.h2,{id:"practice-slow_specrb",children:"Practice slow_spec.rb"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"RSpec.describe 'The sleep() method' do\n\tit('can sleep for 0.1 second') { sleep 0.1 }\n\tit('can sleep for 0.2 second') { sleep 0.2 }\n\tit('can sleep for 0.3 second') { sleep 0.3 }\n\tit('can sleep for 0.4 second') { sleep 0.4 }\n\tit('can sleep for 0.5 second') { sleep 0.5 }\nend\n"})})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(p,{...e})}):p(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var c=t(6540);const s={},i=c.createContext(s);function r(e){const n=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);