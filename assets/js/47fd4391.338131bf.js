"use strict";(self.webpackChunkxing_life_3=self.webpackChunkxing_life_3||[]).push([[2611],{8401:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var a=n(4848),r=n(8453);const o={},s="Jsonp",l={id:"technique/pg_languages/jquery/jsonp",title:"Jsonp",description:"Jsonp",source:"@site/docs/technique/pg_languages/jquery/jsonp.md",sourceDirName:"technique/pg_languages/jquery",slug:"/technique/pg_languages/jquery/jsonp",permalink:"/docs/technique/pg_languages/jquery/jsonp",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"techniqueSidebar",previous:{title:"JQuery",permalink:"/docs/technique/pg_languages/jquery/"},next:{title:"Node.Js",permalink:"/docs/technique/pg_languages/nodejs/"}},c={},i=[{value:"Jsonp",id:"jsonp-1",level:2},{value:"Ajax upload file",id:"ajax-upload-file",level:2},{value:"checkbox get value",id:"checkbox-get-value",level:2},{value:"select get value or text",id:"select-get-value-or-text",level:2}];function u(t){const e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,r.R)(),...t.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"jsonp",children:"Jsonp"})}),"\n",(0,a.jsx)(e.h2,{id:"jsonp-1",children:"Jsonp"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"$.ajax({\n    url: \"URL.html\",\n    dataType: 'jsonp', //data type\u5fc5\u9808\u8a2d\u5b9a\u6210 'jsonp'\n    crossDomain: true,\n    data: data,\n    success: callback,\n    error: callback\n});\n"})}),"\n",(0,a.jsx)(e.h2,{id:"ajax-upload-file",children:"Ajax upload file"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"var files;\n$('input[type=file]').on('change', prepareUpload);\nfunction prepareUpload(event){\n\tfiles = event.target.files;\n}\n\n$('form').on('submit', uploadFiles);\nfunction uploadFiles(event) {\n\tevent.stopPropagation();\n\tevent.preventDefault();\n\tvar data = new FormData();\n\t$.each(files, function(key, value) {\n\t\tdata.append(key, value);\n\t});\n\t$.ajax({\n\t\turl: 'submit.php',\n\t\ttype: 'POST',\n\t\tdata: data,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tprocessData: false,\n\t\tcontentType: false,\n\t\tsuccess: function(data, textStatus, jqXHR) {\n\t\t\tif(typeof data.error === 'undefined') {\n\t\t\t\tsubmitForm(event, data);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('ERRORS: ' + data.error);\n\t\t\t}\n\t\t},\n\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\tconsole.log('ERRORS: ' + textStatus);\n\t\t}\n\t});\n}\n\n$data = array();\nif(isset($_GET['files'])) {\n\t$error = false;\n\t$files = array();\n\t$uploaddir = './uploads/';\n\tforeach($_FILES as $file)\n\t{\n\t\tif(move_uploaded_file($file['tmp_name'], $uploaddir .basename($file['name'])))\n\t\t{\n\t\t\t$files[] = $uploaddir .$file['name'];\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$error = true;\n\t\t}\n\t}\n\t$data = ($error) ? array('error' => 'There was an error uploading your files') : array('files' => $files);\n}\nelse {\n\t$data = array('success' => 'Form was submitted', 'formData' => $_POST);\n}\n\nfunction submitForm(event, data) {\n\t$form = $(event.target);\n\tvar formData = $form.serialize();\n\t$.each(data.files, function(key, value) {\n\t\tformData = formData + '&filenames[]=' + value;\n\t});\n\t$.ajax({\n\t\turl: 'submit.php',\n\t\ttype: 'POST',\n\t\tdata: formData,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tsuccess: function(data, textStatus, jqXHR) {\n\t\t\tif(typeof data.error === 'undefined') {\n\t\t\t\tconsole.log('SUCCESS: ' + data.success);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('ERRORS: ' + data.error);\n\t\t\t}\n\t\t},\n\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t// Handle errors here\n\t\t\tconsole.log('ERRORS: ' + textStatus);\n\t\t},\n\t\tcomplete: function() {\n\t\t\t// STOP LOADING SPINNER\n\t\t}\n\t});\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"checkbox-get-value",children:"checkbox get value"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"$('input:checkbox:checked[name=\"target_ids[]\"]').map(function() { return $(this).val(); }).get();\n\n# get by name and check\n$( \"input[name='target_names[257][]']:checked:enabled\" )\n"})}),"\n",(0,a.jsx)(e.h2,{id:"select-get-value-or-text",children:"select get value or text"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"$('#select_exception_template').find(':selected').text()\n$('#select_exception_template').find(':selected').val()\n"})})]})}function d(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,a.jsx)(e,{...t,children:(0,a.jsx)(u,{...t})}):u(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>s,x:()=>l});var a=n(6540);const r={},o=a.createContext(r);function s(t){const e=a.useContext(o);return a.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function l(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:s(t.components),a.createElement(o.Provider,{value:e},t.children)}}}]);