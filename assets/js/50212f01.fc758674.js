"use strict";(self.webpackChunkxing_life_3=self.webpackChunkxing_life_3||[]).push([[2826],{7601:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var i=n(4848),a=n(8453);const l={},r="Javascript",o={id:"technique/javascript/README",title:"Javascript",description:"\u8de8\u7db2\u57df\u8b80JS",source:"@site/docs/technique/javascript/README.md",sourceDirName:"technique/javascript",slug:"/technique/javascript/",permalink:"/docs/technique/javascript/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"techniqueSidebar",previous:{title:"Regular Expression",permalink:"/docs/technique/java/regular_expression"},next:{title:"Plugins",permalink:"/docs/technique/javascript/plugins"}},s={},d=[{value:"\u8de8\u7db2\u57df\u8b80JS",id:"\u8de8\u7db2\u57df\u8b80js",level:2},{value:"Get URL params",id:"get-url-params",level:2},{value:"Modify history params",id:"modify-history-params",level:2},{value:"Get client language",id:"get-client-language",level:2},{value:"file upload replace image tag, javascript FileReader",id:"file-upload-replace-image-tag-javascript-filereader",level:2},{value:"fileupload input Clear",id:"fileupload-input-clear",level:2},{value:"javascript form",id:"javascript-form",level:2},{value:"Get element methods",id:"get-element-methods",level:2},{value:"Drag",id:"drag",level:2},{value:"\u6709\u4e9b\u7db2\u9801\u6703\u7528js\u53bb\u9396\u5b9a\u53f3\u9375\uff0c\u8981\u628a\u5b83unlock",id:"\u6709\u4e9b\u7db2\u9801\u6703\u7528js\u53bb\u9396\u5b9a\u53f3\u9375\u8981\u628a\u5b83unlock",level:2},{value:"listen file change by javascript",id:"listen-file-change-by-javascript",level:2}];function c(t){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"javascript",children:"Javascript"})}),"\n",(0,i.jsx)(e.h2,{id:"\u8de8\u7db2\u57df\u8b80js",children:"\u8de8\u7db2\u57df\u8b80JS"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'<script crossorigin src="..."><\/script>\n'})}),"\n",(0,i.jsx)(e.h2,{id:"get-url-params",children:"Get URL params"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'var url_string = window.location;\nvar url = new URL(url_string);\nvar c = url.searchParams.get("c");\n'})}),"\n",(0,i.jsx)(e.h2,{id:"modify-history-params",children:"Modify history params"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'window.history.replaceState({}, document.title, "?search=" + XXXX);\n'})}),"\n",(0,i.jsx)(e.h2,{id:"get-client-language",children:"Get client language"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"window.navigator.language\n"})}),"\n",(0,i.jsx)(e.h2,{id:"file-upload-replace-image-tag-javascript-filereader",children:"file upload replace image tag, javascript FileReader"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'<img id="imageTag">\n<input type="file" onchange="replaceImage(this)">\n\nfunction replaceImage(input, i) {\n\tif (input.files && input.files[0]) {\n\t\tvar reader = new FileReader();\n\t\treader.onload = function (e) {\n\t\t\tvar imageShowId = \'#imageTag\';\n\t\t\t$(imageShowId).attr(\'src\', e.target.result);\n\t\t};\n\t\treader.readAsDataURL(input.files[0]);\n\t}\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"fileupload-input-clear",children:"fileupload input Clear"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"var fileTag = document.getElementById(inputId);\ndocument.getElementById(inputId).outerHTML = fileTag.outerHTML;\n"})}),"\n",(0,i.jsx)(e.h2,{id:"javascript-form",children:"javascript form"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'var f = document.createElement("form");\nf.setAttribute(\'target\',"_blank");\nf.setAttribute(\'method\',"get");\nf.setAttribute(\'action\',"/url");\ndocument.body.appendChild(f);\n\nvar obj = document.createElement("input");\nobj.type = "hidden";\nobj.name = "inputName";\nobj.value = inputValue;\nf.appendChild(obj);\nf.submit();\n'})}),"\n",(0,i.jsx)(e.h2,{id:"get-element-methods",children:"Get element methods"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'document.getElementById("myId");\ndocument.getElementsByTagName("p");\ndocument.getElementsByClassName("myClass");\ndocument.querySelectorAll("p.myId");\ndocument.getElementsByName("myName");\n'})}),"\n",(0,i.jsx)(e.h2,{id:"drag",children:"Drag"}),"\n",(0,i.jsx)(e.p,{children:"js"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'# javascript:\n\nfunction Position(x, y) {\n\tthis.X = x ? x : 0;\n\tthis.Y = y ? y : 0;\n\tthis.add = function (val) {\n\t\tif (val) {\n\t\t\tif (!isNaN(val.X)) this.X += val.X;\n\t\t\tif (!isNaN(val.Y)) this.Y += val.Y;\n\t\t}\n\t\treturn this;\n\t};\n\tthis.subtract = function (val) {\n\t\tif (val) {\n\t\t\tif (!isNaN(val.X)) this.X -= val.X;\n\t\t\tif (!isNaN(val.Y)) this.Y -= val.Y;\n\t\t}\n\t\treturn this;\n\t};\n\tthis.min = function (val) {\n\t\tif (!val) return this;\n\t\t\tif (!isNaN(val.X)) this.X = Math.min(this.X, val.X);\n\t\t\tif (!isNaN(val.Y)) this.Y = Math.min(this.Y, val.Y);\n\t\treturn this;\n\t};\n\tthis.max = function (val) {\n\t\tif (!val) return this;\n\t\tif (!isNaN(val.X)) this.X = Math.max(this.X, val.X);\n\t\tif (!isNaN(val.Y)) this.Y = Math.max(this.Y, val.Y);\n\t\treturn this;\n\t};\n\tthis.apply = function (element, control) {\n\t\tif (!element) return;\n\t\tif (!isNaN(this.X)) {\n\t\t\tif (control && (control.orientation != \'horizontal\' || this.X > control.upperLimit || this.X < control.lowerLimit)) return;\n\t\t\telement.style.left = this.X + \'px\';\n\t\t}\n\t\tif (!isNaN(this.Y)) {\n\t\t\tif (control && (control.orientation != \'vertical\' || this.Y > control.upperLimit || this.Y < control.lowerLimit)) return;\n\t\t\telement.style.top = this.Y + \'px\';\n\t\t}\n\t};\n}\nfunction absoluteCursorPosition(e) {\n\te = e || window.event;\n\tif (isNaN(window.scrollX)) return new Position(e.clientX + document.documentElement.scrollLeft + document.body.scrollLeft,\n\te.clientY + document.documentElement.scrollTop + document.body.scrollTop);\n\telse return new Position(e.clientX + window.scrollX, e.clientY + window.scrollY);\n}\nfunction dragObject(element, startCallback, moveCallback, endCallback) {\n\tif (!element) return;\n\tvar cursorStartPos = null;\n\tvar elementStartPos = null;\n\tvar dragging = false;\n\tvar control;\n\tif (document.addEventListener) element.addEventListener("mousedown", dragStart, false);\n\telse element.attachEvent("onmousedown", dragStart);\n\tfunction dragStart(e) {\n\t\te = e || window.event;\n\t\tif ((e.which && e.which != 1) || (e.button && e.button != 1)) return; //only allow mouse left key\n\t\tif (dragging) return;\n\t\tdragging = true;\n\t\tif (startCallback) control = startCallback(e, element);\n\t\tcursorStartPos = absoluteCursorPosition(e);\n\t\telementStartPos = new Position(parseInt(element.style.left), parseInt(element.style.top));\n\t\tif (document.addEventListener) {\n\t\t\tdocument.addEventListener("mousemove", dragGo, false);\n\t\t\tdocument.addEventListener("mouseup", dragStop, false);\n\t\t} else {\n\t\t\tdocument.attachEvent("onmousemove", dragGo);\n\t\t\tdocument.attachEvent("onmouseup", dragStop);\n\t\t}\n\t}\n\tfunction dragGo(e) {\n\t\tif (!dragging) return;\n\t\tvar newPos = absoluteCursorPosition(e).add(elementStartPos).subtract(cursorStartPos);\n\t\tnewPos.apply(element, control);\n\t\tif (moveCallback) moveCallback(e, element, newPos);\n\t}\n\tfunction dragStop(e) {\n\t\tif (!dragging) return;\n\t\tdragging = false;\n\t\tcursorStartPos = null;\n\t\telementStartPos = null;\n\t\tif (endCallback) endCallback(e, element);\n\t\tif (document.removeEventListener) {\n\t\t\tdocument.removeEventListener("mousemove", dragGo, false);\n\t\t\tdocument.removeEventListener("mouseup", dragStop, false);\n\t\t} else {\n\t\t\tdocument.detachEvent("onmousemove", dragGo);\n\t\t\tdocument.detachEvent("onmouseup", dragStop);\n\t\t}\n\t}\n\tthis.dispose = function () {\n\t\tif (element.removeEventListener) element.removeEventListener("mousedown", dragStart, false);\n\t\telse element.detachEvent("onmousedown", dragStart);\n\t};\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"html"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'# html\n\n<script> var dothis = new dragObject(document.getElementById("demoimage"));<\/script>\n<span style="background-color:green;position:relative;width:100px;cursor:move;color:white;" id="demoimage">test</span>\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u6709\u4e9b\u7db2\u9801\u6703\u7528js\u53bb\u9396\u5b9a\u53f3\u9375\u8981\u628a\u5b83unlock",children:"\u6709\u4e9b\u7db2\u9801\u6703\u7528js\u53bb\u9396\u5b9a\u53f3\u9375\uff0c\u8981\u628a\u5b83unlock"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'javascript:(function() { function R(a){ona = "on"+a; if(window.addEventListener) window.addEventListener(a, function (e) { for(var n=e.originalTarget; n; n=n.parentNode) n[ona]=null; }, true); window[ona]=null; document[ona]=null; if(document.body) document.body[ona]=null; } R("contextmenu"); R("click"); R("mousedown"); R("mouseup"); R("selectstart");})()\n'})}),"\n",(0,i.jsx)(e.h2,{id:"listen-file-change-by-javascript",children:"listen file change by javascript"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"<!DOCTYPE HTML>\n<html>\n<head>\n\t<meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\">\n\t<title>Watch for a file change</title>\n\t<style type='text/css'>\n\t\tbody {\n\t\t\tfont-family: sans-serif;\n\t\t}\n\t</style>\n</head>\n<body>\n<input type='file' id='filename'>\n<input type='button' id='btnStart' value='Start'>\n<script type='text/javascript'>\n(function() {\n\tvar input;\n\tvar lastMod;\n\n\tdocument.getElementById('btnStart').onclick = function() {\n\t\tstartWatching();\n\t};\n\tfunction startWatching() {\n\t\tvar file;\n\n\t\tif (typeof window.FileReader !== 'function') {\n\t\t\tdisplay(\"The file API isn't supported on this browser yet.\");\n\t\t\treturn;\n\t\t}\n\n\t\tinput = document.getElementById('filename');\n\t\tif (!input) {\n\t\t\tdisplay(\"Um, couldn't find the filename element.\");\n\t\t}\n\t\telse if (!input.files) {\n\t\t\tdisplay(\"This browser doesn't seem to support the `files` property of file inputs.\");\n\t\t}\n\t\telse if (!input.files[0]) {\n\t\t\tdisplay(\"Please select a file before clicking 'Show Size'\");\n\t\t}\n\t\telse {\n\t\t\tfile = input.files[0];\n\t\t\tlastMod = file.lastModifiedDate;\n\t\t\tdisplay(\"Last modified date: \" + lastMod);\n\t\t\tdisplay(\"Change the file\");\n\t\t\tsetInterval(tick, 250);\n\t\t}\n\t}\n\n\tfunction tick() {\n\t\tvar file = input.files && input.files[0];\n\t\tif (file && lastMod && file.lastModifiedDate.getTime() !== lastMod.getTime()) {\n\t\t\tlastMod = file.lastModifiedDate;\n\t\t\tdisplay(\"File changed: \" + lastMod);\n\t\t}\n\t}\n\n\tfunction display(msg) {\n\t\tvar p = document.createElement('p');\n\t\tp.innerHTML = msg;\n\t\tdocument.body.appendChild(p);\n\t}\n})();\n<\/script>\n</body>\n</html>\n"})})]})}function u(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(c,{...t})}):c(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>r,x:()=>o});var i=n(6540);const a={},l=i.createContext(a);function r(t){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function o(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:r(t.components),i.createElement(l.Provider,{value:e},t.children)}}}]);